# 消除 HTTP 瓶颈的 SPDY

目的在于缩短页面的加载时间

## HTTP 的瓶颈

1. 一个连接上只能发送一个 HTTP 请求

2. 请求只能从客户端开始

3. 请求和响应首部未经压缩就发送

4. 发送冗余首部。每次互相发送相同的首部造成的浪费较多。

5. 可任意选择压缩格式，非强制压缩

解决方案：

1. ajax --- 部分更新

2. Comet 的解决方法一旦服务器端有内容更新了，Comet 不会让请求等待，而是直接给客户端返回响应。（服务器主动推送更新）

缺点就是不能立即响应客户端请求，需要服务器有更新是才会响应客户端请求

需要一直维持连接状态

## SPDY 的设计与功能

规定通信中使用 SSL

SPDY 以会话层的形式加入，控制对数据的流动，但还是采用 HTTP 建立通信连接。（在 http 和 ssl 中间）

### 功能

1. 多路复用

通过单一的 TCP 连接，可以无限制处理多个 HTTP 请求。所有请求的处理都在一条 TCP 连接上完成，因此 TCP 的处理效率得到提高。

2. 赋予请求优先级

3. HTTP 首部压缩

4. 服务端推送

5. 服务端提示

服务器可以主动提示客户端请求所需的资源。

## SPDY 真的解决 HTTP 的瓶颈了吗？

因为 SPDY 基本上只是将单个域名（IP 地址）的通信多路复用，所以当一个 Web 网站上使用多个域名下的资源，改善效果就会受到限制。

# 使用浏览器进行全双工通信的 WebSocket

## WebSocket 的设计与功能

浏览器和服务器之间的全双工通信

## WebScoket 协议

一旦 Web 服务器与客户端之间建立起 WebSocket 协议的通信连接，之后所有的通信都依靠这个专用协议进行。可以发送任意类型的资源

由于是建立在 HTTP 基础上的，所以请求仍旧只能客户端发起；但是一旦连接建立，客户端和服务器都可以发送数据

### 特点

1. 推送

支持服务器向客户端推送数据

2. 减少通信量

一旦连接建立，就可以一直保持连接

和 HTTP 相比，不但每次连接时的总开销减少，而且由于 WebSocket 的首部信息很小，通信量也相应减少了。

为了建立 websocket 连接，在 http 连接建立之后还需要一次握手

### 握手·请求

为了实现 WebSocket 通信，需要用到 HTTP 的 Upgrade 首部字段，告知服务器通信协议发生改变，以达到握手的目的。

Sec-WebSocket-Key 字段内记录着握手过程中必不可少的键值。Sec-WebSocket-Protocol 字段内记录使用的子协议。

### 握手·响应

对于之前的请求，返回状态码 101 Switching Protocols 的响应。

Sec-WebSocket-Accept 的字段值是由握手请求中的 Sec-WebSocket-Key 的字段值生成的。

成功握手确立 WebSocket 连接之后，通信时不再使用 HTTP 的数据帧，而采用 WebSocket 独立的数据帧。

# 期盼已久的 HTTP2.0

1. 多路复用

通过单一的 TCP 连接，可以无限制处理多个 HTTP 请求。所有请求的处理都在一条 TCP 连接上完成，因此 TCP 的处理效率得到提高。

2. HTTP 首部压缩

3. 服务端推送

4. 新的二进制格式（Binary Format）

HTTP1.x 的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认 0 和 1 的组合。基于这种考虑 HTTP2.0 的协议解析决定采用二进制格式，实现方便且健壮。

# Web 服务器管理文件的 WebDAV
