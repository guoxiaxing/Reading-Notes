# 针对 web 的攻击技术

## HTTP 不具备必要的安全功能

## 在客户端即可篡改请求

通过 URL 查询字段或表单、HTTP 首部、Cookie 等途径把攻击代码传入，若这时 Web 应用存在安全漏洞，那内部信息就会遭到窃取，或被攻击者拿到管理权限。

## 针对 web 应用的攻击模式

### 以服务器为目标的主动攻击

主动攻击： 攻击者通过直接访问 web 应用，把攻击代码传入的模式。主要攻击服务器上的资源，所以攻击者需要可以直接访问服务器的资源

SQL 注入攻击和 OS 命令注入攻击

### 以服务器为目标的被动攻击

被动攻击：利用圈套策略执行攻击代码的攻击模式。被动攻击中，攻击者不直接对目标 web 应用访问攻击

步骤：

1. 陷阱诱导

2. 用户触发事先已将设计好的陷阱 HTTP 请求

3. 用户浏览器运行攻击代码

4. 执行攻击代码的后果就是用户的 Cookie 被盗取或者用户权限被滥用

跨站脚本攻击 XSS 和跨站请求伪造 CSRF

# 因输出值转义不完全引发的安全漏洞

## 跨站脚本攻击（XSS）攻击这利用事先设置好的陷阱触发的被动攻击 ？？？

通过存在安全漏洞的 web 网站注册用户的浏览器内运行非法的 HTML 标签或 JavaScript 执行攻击

动态创建 HTML 很有可能存在着安全漏洞

造成的影响

1. 利用虚假输入表单骗取用户个人信息（利用脚本窃取用户的 Cookie 值，被害者在不知情的情况下，帮助攻击者发送恶意请求。）

2. 显示伪造的图片或文章

## SQL 注入攻击

针对 web 应用所使用的数据库，执行非法的 sql 语句

造成的影响：

1. 非法查看或者篡改数据库中的数据

2. 规避认证

3. 执行和数据库服务器业务相关联的程序

## OS 命令注入攻击

通过 web 应用，执行非法的操作系统命令以达到攻击的效果

## HTTP 首部注入攻击

攻击者在响应首部字段内插入换行，添加任意响应首部或者主体的攻击；被动攻击

向首部主体内添加内容的攻击称为 HTTP 响应截断攻击

造成的影响：

1. 设置任意 cookie 信息

2. 重定向至任意 url

3. 显示任意的主体 （HTTP 响应阶段攻击） --- 会使用户浏览攻击者设置的页面

## 邮件首部注入攻击

Web 应用中的邮件发送功能，攻击者通过向邮件首部 To 或 Subject 内任意添加非法内容发起的攻击。利用存在安全漏洞的 Web 网站，可对任意邮件地址发送广告邮件或病毒邮件。

## 目录/路径遍历攻击

对于本无意公开的目录通过非法截断路径后，达成访问目的的一种攻击

## 远程文件包含漏洞

部分脚本内容需要从其他文件读入时，攻击者利用指定外部服务器的 URL 充当依赖文件，让脚本读取之后，就可运行任意脚本的一种攻击。（主要是 php）

# 因设置或者设计上的缺陷引发的安全漏洞

## 强制浏览

从安置在 web 服务器的公开目录下的文件中浏览那些原本非自愿公开的文件

影响：

- 造成用户的隔热板信息泄漏

- 泄露本来需要权限才可以访问的信息

- 泄露未连接到外部的文件

## 不正确的错误消息处理

web 应用的错误信息内包含对攻击者的有用信息

- web 应用抛出的错误消息

- 数据库等系统抛出的错误消息

## 开放重定向

对指定的 URL 进行重定向。

指定的重定向 URL 到某个具有恶意的 Web 网站，那么用户就会被诱导至那个 Web 网站。

# 因会话管理疏漏引发的安全漏洞

## 会话劫持

用户通过一些非法手段拿到用户的会话 ID，并非法使用此会话 ID 伪装成用户，达到攻击效果。主动攻击

攻击者可以获得会话 ID 的途径

1. 通过非正规的生成方法推测会话 ID

2. 通过窃听或者 XSS 盗取获得会话 ID

3. 通过会话固定攻击（Session Fixation）强行获取会话 ID

## 会话固定攻击

会强制用户使用攻击者的会话 ID，属于被动攻击

## 跨站请求伪造 CSRF

攻击者通过设置好的陷阱，强制对已完成认证的用户进行非预期的个人信息或设定信息等某些状态更新，属于被动攻击。

用户登陆受信任的网站 a，在不登出 a 的情况下访问危险网站 b（拿到用户的登陆信息）

影响：

- 利用已认证的用户的权限进行信息的更新

- 利用已认证的用户的权限进行购买商品

- 利用已认证的用户的权限在留言板上发布留言

# 其它安全漏洞

## 密码破解

算出密码，突破认证

### 通过网络进行密码试错

对 Web 应用提供的认证功能，通过网络尝试候选密码进行的一种攻击。

两种方式：

- 穷举法

穷举法（Brute-force Attack，又称暴力破解法）是指对所有密钥集合构成的密钥空间（Keyspace）进行穷举。

- 字典攻击

字典攻击是指利用事先收集好的候选密码（经过各种组合方式后存入字典），枚举字典中的密码，尝试通过认证的一种攻击手法。

> 字典攻击中有一种利用其他 Web 网站已泄露的 ID 及密码列表进行的攻击。很多用户习惯随意地在多个 Web 网站使用同一套 ID 及密码，因此攻击会有相当高的成功几率

### 对已加密的密码进行破解

对加密的数据进行破解有下面几种方式

- 通过穷举法&字典攻击进行破解

针对密码使用散列函数处理的情况，可以使用穷举法或者字典攻击来对候选密码使用相同的散列函数加密，将加密结果与目标密码进行匹配，类推出密码

- 彩虹表

由明文及其散列值构成的一张数据表

- 拿到密钥

使用共享密钥加密的这种情况，如果可以拿到密钥，就可以利用密钥进行破解

- 加密算法的漏洞

## 点击劫持

使用透明按钮或者链接放在 web 页面上，诱使用户在不知情的情况下点击获取内容的攻击手段

## DOS 攻击

让运行中的服务呈停止状态的攻击。（服务停止攻击/拒绝服务攻击）

### 通过攻击安全漏洞使服务停止

### 海量请求造成资源过载，资源用尽的同时，实际上服务也就呈停止状态。

## 后门程序

三种类型：

1. 开发阶段作为 debug 调用的后门程序

2. 开发者为了自身利益植入的后门程序

3. 攻击者通过某种方法设置的后门程序
